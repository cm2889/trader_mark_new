{% extends 'base.html' %}

{% block title %}Change Password{% endblock %}

{% block content %}
<section class="min-h-screen text-[var(--text-color)]">
    <div class="container mx-auto ">

      <div class="">
          <!-- Body -->
          <div class="px-5 sm:px-6 py-5">
              <form method="post" class="space-y-6">
              {% csrf_token %}

                  <!-- User strip -->
                  <div class="grid gap-5 md:grid-cols-[100px_1fr] items-center">
                    <div class="flex justify-center md:justify-start">
                      <img
                        src="{{ user.get_profile_photo_url }}"
                        alt="{{ user|default_if_none:'' }}"
                        class="h-24 w-24 rounded-xl object-cover ring-1 ring-[var(--border-color)] bg-white"
                      />
                    </div>
                    <div>
                      <h4 class="text-xl md:text-3xl font-medium">{{ user|default_if_none:'' }}</h4>
                      <div class="mt-1 text-base text-[var(--text-light-color)] space-y-0.5">
                        {% if user.phone %}
                          <p>Mobile: {{ user.phone|default_if_none:'' }}</p>
                        {% endif %}
                        {% if user.email %}
                          <p>Email: {{ user.email|default_if_none:'' }}</p>
                        {% endif %}
                      </div>
                    </div>
                  </div>

                  <!-- Form grid -->
                  <div class="grid gap-6 lg:grid-cols-2">
                      <!-- Left: fields -->
                      <div class="space-y-4">
                          <div>
                            <label for="{{ form.password1.id_for_label }}" class="mb-1 block text-sm font-medium">New password</label>
                            <input
                              type="password"
                              class="form-control h-11 w-full rounded-md bg-white px-3 text-sm ring-1 ring-[var(--border-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]"
                              id="{{ form.password1.id_for_label }}"
                              name="{{ form.password1.name }}"
                              value="{{ form.old_password.value|default_if_none:'' }}"
                              required
                            />
                            {% if form.password1.errors %}
                              <div class="mt-1 text-sm text-red-600">
                                {% for error in form.password1.errors %}<p>{{ error }}</p>{% endfor %}
                              </div>
                            {% endif %}
                          </div>

                          <div>
                            <label for="{{ form.password2.id_for_label }}" class="mb-1 block text-sm font-medium">Confirm new password</label>
                            <input
                              type="password"
                              class="form-control h-11 w-full rounded-md bg-white px-3 text-sm ring-1 ring-[var(--border-color)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]"
                              id="{{ form.password2.id_for_label }}"
                              name="{{ form.password2.name }}"
                              value="{{ form.new_password1.value|default_if_none:'' }}"
                              required
                            />
                            {% if form.password2.errors %}
                              <div class="mt-1 text-sm text-red-600">
                                {% for error in form.password2.errors %}<p>{{ error }}</p>{% endfor %}
                              </div>
                            {% endif %}
                          </div>
                      </div>

                      <!-- Right: requirements -->
                      <div class="flex items-start gap-3 rounded-md bg-[#FEFCE8] p-4 border-l-4 border-[#FACC15]">
                          <!-- Icon -->
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-[#FACC15] mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                          </svg>

                          <!-- Content -->
                          <div>
                            <p class="text-[15px] font-semibold text-[var(--text-color)]">
                              Requirements:
                              <span class="font-normal">To create a new password, you have to meet all of the following requirements</span>
                            </p>
                            <ul class="list-disc pl-5 mt-2 space-y-1 text-sm text-[var(--text-color)]">
                              <li>Minimum 8 characters</li>
                              <li>At least one special character</li>
                              <li>At least one number</li>
                              <li>Canâ€™t be the same as a previous password</li>
                            </ul>
                          </div>
                      </div>
                  </div>

                  <!-- Submit -->
                  <div class="pt-2">
                    <button
                      type="submit"
                      class="h-11 w-full sm:w-auto px-6 rounded-md bg-[var(--button-bg-color)] text-[var(--button-text-color)] text-sm font-medium shadow-sm hover:opacity-95 focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]/30">
                      Change Password
                    </button>
                  </div>
              </form>
          </div>
      </div>

    </div>
</section>
{% endblock %}
